<?php

namespace Sail\Utils;

class EmailSender {
    function send_verification_email($sail_user_array) {
        // Send verification email
        $email = $sail_user_array['email'];
        $email_verification_key = uniqid('sail-email-verification-', true);
        $url = esc_url_raw( "https://sailhousingsolutions.org/verify-email" . "?verification_key=$email_verification_key&email=$email" );
        
        $message = "Hello ";
        $message .= $sail_user_array['firstName'];
        $message .= "!\r\n\r\n";
        $message .= "Thanks for joining SAIL! In order to ensure that your email is configured correctly, please verify it by clicking this link:\r\n\r\n";
        $message .= $url;
        $message .= "\r\n\r\nIf you didn't sign-up for SAIL, please ignore this email.";

        wp_mail( $email, "SAIL Email Verification", $message );
        
        return $email_verification_key;
    }
}